<?xml version="1.0" encoding="UTF-8"?>
<project default="" basedir=".." name="Lucee">

    <target name="setup" description="Sets up common properties">

        <property name="project.dir" value="${basedir}" />
        <echo level="info" message="Project dir: ${project.dir}" />

        <property name="lib.dir" value="${project.dir}/dev/lib" />        
        <echo level="info" message="Lib dir    : ${lib.dir}" />

        <property name="loader.pom" value="${project.dir}/loader/pom.xml" />        
        <echo level="info" message="Loader POM : ${loader.pom}" />
    </target>

    <target name="lib-clean" depends="setup" description="Deletes JAR files from dev/lib">

        <delete>
            <fileset dir="${lib.dir}">
                <include name="*.jar" />
            </fileset>
        </delete>

        <echo level="info" message="Deleted JARs from ${lib.dir}" />
    </target>

    <target name="lib-download" depends="setup" description="Downloads JAR files to dev/lib">

        <exec executable="mvn">
            <arg value="-f" />
            <arg value="${loader.pom}" />
            <arg value="dependency:copy-dependencies" />
            <arg value="-DoutputDirectory=${lib.dir}" />
        </exec>

        <echo level="info" message="Downloaded JARs to ${lib.dir}" />
    </target>

    <target name="ide-intellij" depends="lib-download" description="Adds IDE support for IntelliJ IDEA">

        <property name="ide.dir" value="${project.dir}/ant/res/ide-support/intellij-idea" />        
        <echo level="info" message="Source dir : ${ide.dir}" />

        <copy todir="${project.dir}" overwrite="true">
            <fileset dir="${ide.dir}" />
        </copy>
    </target>
</project>